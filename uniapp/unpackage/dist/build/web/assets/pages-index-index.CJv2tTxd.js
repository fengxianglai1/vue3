import{g as e,c as t,o as s,a as l,w as i,b as a,F as o,r as n,d as c,v as u,e as m,n as d,f as g,h as r,i as h,t as p,j as y,k as f,l as k,m as V,p as _}from"./index-CjjC-RqS.js";import{_ as C}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{r as S}from"./uni-icons.BDknZvrl.js";import{_ as b}from"./uni-datetime-picker.BhXnyodc.js";const x=C({data:()=>({msgList:[],time:3e3,id:101,elHeight:[],messageAniStyle:null,closeInfo:{},direction:"top",safeHeight:0,count:{start:0,end:0},color:{success:"#67c23a",default:"#1989fa",warning:"#e6a23c",error:"#f56c6c"},icon:{success:"success",default:"info",warning:"warn",error:"clear"},directionStyle:{top:{class:"show-message",style:{top:"5%"}},center:{class:"show-message-reverse",style:{top:"inherit",bottom:"50%"}},bottom:{class:"show-message-reverse",style:{top:"inherit",bottom:"10%"}}}}),mounted(){let t=this;e({success:function(e){t.safeHeight=e.safeArea.top+"px"}})},methods:{show(e){e.id=this.createId(),this.direction=e.direction||"top",e.customStyle=e.customStyle||{};let t=e.customStyle.fontSize?Number(e.customStyle.fontSize.toString().replace(/\D/g,"")):32;e.type=e.type?e.type:"default";let s=e.iconColor?e.iconColor:e.customStyle.color?e.customStyle.color:this.color[e.type];e.class=this.directionStyle[this.direction].class,e.icon=!1===e.icon?"":!0!==e.icon&&e.icon?e.icon:this.icon[e.type],e.iconColor=s,e.textColor=e.customStyle.color?e.customStyle.color:"default"===e.type?"#222222":this.color[e.type],e.textSize=t+"rpx",!e.iconSize&&(e.iconSize=t/2),"top"!==this.direction&&this.msgList.length&&(this.msgList[0].class=""),setTimeout((()=>{"top"===this.direction?this.msgList.push(e):this.msgList.unshift(e),this.closeInfo[e.id]=e,this.closeMessage(e)}),50)},getClass(e){const s=t().in(this);return new Promise(((t,l)=>{s.select("."+e).boundingClientRect((e=>{t(e)})).exec()}))},closeMessage(e){let t=isNaN(Number(e.time))?this.time:Number(e.time);!1!==e.time&&setTimeout((async()=>{let e=[],t=[];this.msgList.forEach(((s,l)=>{!1===s.time?t.push(s):e.push(s)})),this.msgList=e.concat(t);let s=this.msgList.length-1-this.count.start;this.msgList=this.msgList.map(((e,t)=>("top"===this.direction?t<=this.count.start&&(e.class="close-message"):t>=s&&(e.class="close-message"),e))),this.msgList.push(),this.count.start++;let l=null;if("top"===this.direction)l=await this.getClass("classList"+this.count.start);else{let e=this.msgList.length;l=await this.getClass("classList"+e)}this.elHeight.push(l?l.height:41);let i=this.elHeight.reduce((function(e,t){return Number((e+t).toFixed(2))})),a="top"===this.direction?-i:i;this.messageAniStyle={transform:"translate(-50%, "+a+"px)",transition:"all 0.4s"},setTimeout((()=>{this.count.end++,this.count.start===this.count.end&&(this.messageAniStyle={},this.msgList=this.msgList.map(((e,t)=>(e.class="",e))),this.msgList.length,"top"===this.direction?(this.msgList.splice(0,this.count.start),this.elHeight.splice(0,this.count.start)):(this.msgList.splice(-this.count.start,this.count.start),this.elHeight.splice(-this.count.start,this.count.start)),this.count.start=0,this.count.end=0)}),300)}),t)},createId(){return++this.id},close(e){if(e&&this.closeInfo[e]){let t=this.closeInfo[e];t.time=10,this.closeMessage(t)}}}},[["render",function(e,t,V,_,C,S){const b=y,x=f,L=k;return s(),l(b,{class:"quick-message"},{default:i((()=>[(s(!0),a(o,null,n(C.msgList,((e,t)=>c((s(),l(b,{class:"quick-message-mask",key:t})),[[u,e.mask]]))),128)),m(b,{class:"quick-message-centre",style:d([C.messageAniStyle,C.directionStyle[C.direction].style])},{default:i((()=>[m(b,{class:"safeHeight",style:d({height:C.safeHeight+"px"})},null,8,["style"]),(s(!0),a(o,null,n(C.msgList,((e,t)=>(s(),l(b,{class:g(["quick-message-list",["classList"+(t+1)]]),key:t},{default:i((()=>[m(b,{class:g(["quick-message-list-child",[e.type+"-message",e.class?e.class:""]]),style:d([e.customStyle])},{default:i((()=>[m(b,{class:"msg-child-content"},{default:i((()=>[e.icon?(s(),l(x,{key:0,class:"msg-icon",type:e.icon,size:e.iconSize,color:e.iconColor?e.iconColor:""},null,8,["type","size","color"])):r("",!0),m(L,{class:"msg-text",style:d({fontSize:e.textSize,color:e.textColor})},{default:i((()=>[h(p(e.msg),1)])),_:2},1032,["style"])])),_:2},1024)])),_:2},1032,["style","class"])])),_:2},1032,["class"])))),128)),m(b,{class:"safeHeight",style:d({height:C.safeHeight+"px"})},null,8,["style"])])),_:1},8,["style"])])),_:1})}],["__scopeId","data-v-d679b11b"]]);const L=C({data:()=>({single:"",datetimesingle:"",range:["2021-02-1","2021-3-28"],datetimerange:[],start:Date.now()-1e9,end:Date.now()+1e9}),watch:{datetimesingle(e){console.log("单选:",this.datetimesingle)},range(e){console.log("范围选:",this.range)},datetimerange(e){console.log("范围选:",this.datetimerange)}},mounted(){setTimeout((()=>{this.datetimesingle=Date.now()-1728e5,this.single="2021-2-12",this.datetimerange=["2021-07-08 0:01:10","2021-08-08 23:59:59"]}),3e3)},methods:{change(e){this.single=e,console.log("change事件:",this.single=e)},changeLog(e){console.log("change事件:",e)},maskClick(e){console.log("maskClick事件:",e)},showMessage(){this.$refs.message.show({msg:"点击了1下"}),this.$refs.message.show({type:"default",msg:"点击了消息提示窗",direction:"top",icon:!0,mask:!0,time:5e3,customStyle:{color:"#FFFFFF",backgroundColor:"rgba(0,0,0,.5)"},iconSize:16,iconColor:""})}}},[["render",function(e,t,l,n,c,u){const d=y,g=S(V("quick-message"),x),r=k,p=_("uni-card"),f=_("uni-section"),C=S(V("uni-datetime-picker"),b);return s(),a(o,null,[m(d,null,{default:i((()=>[m(d,{onClick:u.showMessage},{default:i((()=>[h("show")])),_:1},8,["onClick"]),m(g,{ref:"message"},null,512)])),_:1}),m(d,{class:"page container"},{default:i((()=>[m(p,{"is-full":""},{default:i((()=>[m(r,{class:"uni-h6"},{default:i((()=>[h("可以同时选择日期和时间的选择器")])),_:1})])),_:1}),m(f,{title:"日期用法："+c.single,type:"line"},null,8,["title"]),m(d,{class:"example-body"},{default:i((()=>[m(C,{type:"date","clear-icon":!1,modelValue:c.single,"onUpdate:modelValue":t[0]||(t[0]=e=>c.single=e),onMaskClick:u.maskClick},null,8,["modelValue","onMaskClick"])])),_:1}),m(f,{title:"日期时间用法："+c.datetimesingle,type:"line"},null,8,["title"]),m(d,{class:"example-body"},{default:i((()=>[m(C,{type:"datetime",modelValue:c.datetimesingle,"onUpdate:modelValue":t[1]||(t[1]=e=>c.datetimesingle=e),onChange:u.changeLog},null,8,["modelValue","onChange"])])),_:1}),m(f,{title:"日期范围用法：["+c.range+"]",type:"line"},null,8,["title"]),m(d,{class:"example-body"},{default:i((()=>[m(C,{modelValue:c.range,"onUpdate:modelValue":t[2]||(t[2]=e=>c.range=e),type:"daterange",onMaskClick:u.maskClick},null,8,["modelValue","onMaskClick"])])),_:1}),m(f,{title:"日期时间范围用法：["+c.datetimerange+"]",type:"line"},null,8,["title"]),m(d,{class:"example-body"},{default:i((()=>[m(C,{modelValue:c.datetimerange,"onUpdate:modelValue":t[3]||(t[3]=e=>c.datetimerange=e),type:"datetimerange",rangeSeparator:"至"},null,8,["modelValue"])])),_:1}),m(f,{title:"v-model用法："+c.single,type:"line"},null,8,["title"]),m(d,{class:"example-body"},{default:i((()=>[m(C,{modelValue:c.single,"onUpdate:modelValue":t[4]||(t[4]=e=>c.single=e)},null,8,["modelValue"])])),_:1}),m(f,{title:"时间戳用法："+c.single,type:"line"},null,8,["title"]),m(d,{class:"example-body"},{default:i((()=>[m(C,{returnType:"timestamp",modelValue:c.single,"onUpdate:modelValue":t[5]||(t[5]=e=>c.single=e),onChange:t[6]||(t[6]=e=>u.changeLog(e))},null,8,["modelValue"])])),_:1}),m(f,{title:"date 对象用法："+c.datetimesingle,type:"line"},null,8,["title"]),m(d,{class:"example-body"},{default:i((()=>[m(C,{type:"datetime",returnType:"date",modelValue:c.datetimesingle,"onUpdate:modelValue":t[7]||(t[7]=e=>c.datetimesingle=e),onChange:u.changeLog},null,8,["modelValue","onChange"])])),_:1}),m(f,{title:"插槽用法："+c.single,type:"line"},null,8,["title"]),m(d,{class:"example-body"},{default:i((()=>[m(C,{modelValue:c.single,"onUpdate:modelValue":t[8]||(t[8]=e=>c.single=e)},{default:i((()=>[h("我是一个插槽，点击我")])),_:1},8,["modelValue"])])),_:1}),m(f,{title:"无边框用法："+c.single,type:"line"},null,8,["title"]),m(d,{class:"example-body"},{default:i((()=>[m(C,{modelValue:c.single,"onUpdate:modelValue":t[9]||(t[9]=e=>c.single=e),border:!1},null,8,["modelValue"])])),_:1}),m(f,{title:"隐藏清除按钮用法："+c.single,type:"line"},null,8,["title"]),m(d,{class:"example-body"},{default:i((()=>[m(C,{modelValue:c.single,"onUpdate:modelValue":t[10]||(t[10]=e=>c.single=e),clearIcon:!1},null,8,["modelValue"])])),_:1}),m(f,{title:"disabled用法："+c.single,type:"line"},null,8,["title"]),m(d,{class:"example-body"},{default:i((()=>[m(C,{modelValue:c.single,"onUpdate:modelValue":t[11]||(t[11]=e=>c.single=e),disabled:""},null,8,["modelValue"])])),_:1})])),_:1})],64)}],["__scopeId","data-v-558ee514"]]);export{L as default};

{"version":3,"file":"unicloud-city-select.js","sources":["uni_modules/unicloud-city-select/components/unicloud-city-select/unicloud-city-select.vue","../../../Users/Administrator/Downloads/plugins/uniapp-cli-vite/uniComponent:/QzovdnVlM2dpdGh1Yi92dWUzL3VuaWFwcC91bmlfbW9kdWxlcy91bmljbG91ZC1jaXR5LXNlbGVjdC9jb21wb25lbnRzL3VuaWNsb3VkLWNpdHktc2VsZWN0L3VuaWNsb3VkLWNpdHktc2VsZWN0LnZ1ZQ"],"sourcesContent":["<template>\r\n\t<view></view>\r\n</template>\r\n\r\n<script>\n\tconst uniMapCo = uniCloud.importObject('uni-map-co', {\n\t\tcustomUI: true\n\t});\r\n\tconst db = uniCloud.database();\r\n\tconst _ = db.command;\r\n\tconst $ = _.aggregate;\r\n\t/**\n\t * unicloud-city-select\n\t * @description 云端一体城市选择组件\n\t * @property {Boolean} location = [true|false] 是否自动获取定位所在的城市\n\t * @property {Array} hotCity 热门城市列表\n\t * @event {Function} mounted 组件加载完成触发（此时不一定有数据）\n\t * @event {Function} select 选择城市后触发（若设置location=\"true\"则会在定位成功后触发一次select事件）\n\t */\r\n\texport default {\r\n\t\tname: \"unicloud-city-select\",\r\n\t\temits: [\"mounted\", \"select\"],\r\n\t\tprops: {\n\t\t\t// 热门城市列表\r\n\t\t\thotCity: {\r\n\t\t\t\ttype: Array,\r\n\t\t\t\tdefault: function() {\r\n\t\t\t\t\treturn []\r\n\t\t\t\t}\r\n\t\t\t},\n\t\t\t// 是否自动获取定位所在的城市\n\t\t\tlocation: {\n\t\t\t\ttype: Boolean,\n\t\t\t\tdefault: true\n\t\t\t}\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\r\n\t\t\t};\r\n\t\t},\r\n\t\tmounted() {\n\t\t\tlet { location } = this;\n\t\t\tif (location) this.getLocation();\r\n\t\t\tthis.$emit(\"mounted\");\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 打开选择页面\r\n\t\t\topen() {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: `/uni_modules/unicloud-city-select/pages/uni-city-list/uni-city-list`,\r\n\t\t\t\t\tevents: {\r\n\t\t\t\t\t\tselect: (data) => {\r\n\t\t\t\t\t\t\tthis.$emit(\"select\", data)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t// 通过eventChannel向被打开页面传送数据\r\n\t\t\t\t\t\tres.eventChannel.emit('data', {\r\n\t\t\t\t\t\t\thotCity: this.hotCity\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\n\t\t\t// 获取定位所在城市\n\t\t\tgetLocation() {\n\t\t\t\tuni.getLocation({\n\t\t\t\t\ttype: 'gcj02',\n\t\t\t\t\tsuccess: async (res) => {\n\t\t\t\t\t\tlet location2addressRes = await uniMapCo.location2address({\n\t\t\t\t\t\t\tlocation: `${res.latitude},${res.longitude}`\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.city = {\n\t\t\t\t\t\t\tcode: parseInt(Number(location2addressRes.result.result.adcode)/100)*100+\"\",\n\t\t\t\t\t\t\tname: location2addressRes.result.result.city,\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.$emit(\"select\", this.city)\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\r\n\t\t},\r\n\t\twatch: {\r\n\r\n\t\t},\r\n\t\tcomputed: {\r\n\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n</style>","import Component from 'C:/vue3github/vue3/uniapp/uni_modules/unicloud-city-select/components/unicloud-city-select/unicloud-city-select.vue'\nwx.createComponent(Component)"],"names":["uniCloud","uni"],"mappings":";;AAKC,MAAM,WAAWA,cAAAA,GAAS,aAAa,cAAc;AAAA,EACpD,UAAU;AACX,CAAC;AACD,MAAM,KAAKA,iBAAS;AACpB,MAAM,IAAI,GAAG;AACH,EAAE;AASZ,MAAK,YAAU;AAAA,EACd,MAAM;AAAA,EACN,OAAO,CAAC,WAAW,QAAQ;AAAA,EAC3B,OAAO;AAAA;AAAA,IAEN,SAAS;AAAA,MACR,MAAM;AAAA,MACN,SAAS,WAAW;AACnB,eAAO,CAAC;AAAA,MACT;AAAA,IACA;AAAA;AAAA,IAED,UAAU;AAAA,MACT,MAAM;AAAA,MACN,SAAS;AAAA,IACV;AAAA,EACA;AAAA,EACD,OAAO;AACN,WAAO;EAGP;AAAA,EACD,UAAU;AACT,QAAI,EAAE,SAAW,IAAE;AACnB,QAAI;AAAU,WAAK;AACnB,SAAK,MAAM,SAAS;AAAA,EACpB;AAAA,EACD,SAAS;AAAA;AAAA,IAER,OAAO;AACNC,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,QACL,QAAQ;AAAA,UACP,QAAQ,CAAC,SAAS;AACjB,iBAAK,MAAM,UAAU,IAAI;AAAA,UAC1B;AAAA,QACA;AAAA,QACD,SAAS,CAAC,QAAQ;AAEjB,cAAI,aAAa,KAAK,QAAQ;AAAA,YAC7B,SAAS,KAAK;AAAA,WACd;AAAA,QACF;AAAA,OACA;AAAA,IACD;AAAA;AAAA,IAED,cAAc;AACbA,oBAAAA,MAAI,YAAY;AAAA,QACf,MAAM;AAAA,QACN,SAAS,OAAO,QAAQ;AACvB,cAAI,sBAAsB,MAAM,SAAS,iBAAiB;AAAA,YACzD,UAAU,GAAG,IAAI,QAAQ,IAAI,IAAI,SAAS;AAAA,UAC3C,CAAC;AACD,eAAK,OAAO;AAAA,YACX,MAAM,SAAS,OAAO,oBAAoB,OAAO,OAAO,MAAM,IAAE,GAAG,IAAE,MAAI;AAAA,YACzE,MAAM,oBAAoB,OAAO,OAAO;AAAA,UACzC;AACA,eAAK,MAAM,UAAU,KAAK,IAAI;AAAA,QAC/B;AAAA,MACD,CAAC;AAAA,IACD;AAAA,EACD;AAAA,EACD,OAAO,CAEN;AAAA,EACD,UAAU,CAEV;AACD;;;;;ACtFD,GAAG,gBAAgB,SAAS;"}